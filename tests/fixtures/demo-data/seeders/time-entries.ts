import { db } from "@/lib/db";
import { timeEntries } from "@/lib/db/schema";
import { DEMO_IDS } from "../ids";
import type { SeederContext } from "../types";

/**
 * Seed time entries for demo data
 * Creates 50 time entries across all matters with various statuses and sources
 */
export async function seedTimeEntries(ctx: SeederContext) {
  console.log("  Seeding time entries...");

  const now = ctx.now;
  const today = now.toISOString().split("T")[0];
  const yesterday = new Date(now.getTime() - 86400000).toISOString().split("T")[0];

  const timeEntriesData = [
    {
      id: DEMO_IDS.timeEntries.te1,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancing,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: yesterday,
      description: "Review of title documents and property information forms",
      durationMinutes: 90,
      hourlyRate: "200.00",
      amount: "300.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te2,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancing,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: today,
      description: "Drafting enquiries to seller's solicitors",
      durationMinutes: 60,
      hourlyRate: "200.00",
      amount: "200.00",
      status: "draft" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te3,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigation,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: yesterday,
      description: "Conference with client and expert witness",
      durationMinutes: 120,
      hourlyRate: "350.00",
      amount: "700.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te4,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigation,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: today,
      description: "Reviewing expert report on foundation defects",
      durationMinutes: 180,
      hourlyRate: "350.00",
      amount: "1050.00",
      status: "submitted" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Conveyancing - Sale matter
    {
      id: DEMO_IDS.timeEntries.te5,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancingSale,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: yesterday,
      description: "Drafting contract for sale and fixtures list",
      durationMinutes: 120,
      hourlyRate: "180.00",
      amount: "360.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te6,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancingSale,
      feeEarnerId: DEMO_IDS.users.paralegal1,
      workDate: today,
      description: "Responding to buyer's enquiries",
      durationMinutes: 45,
      hourlyRate: "100.00",
      amount: "75.00",
      status: "draft" as const,
      source: "email_inferred" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Remortgage matter
    {
      id: DEMO_IDS.timeEntries.te7,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancingRemortgage,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: new Date(now.getTime() - 2 * 86400000).toISOString().split("T")[0],
      description: "Reviewing mortgage offer and conditions",
      durationMinutes: 30,
      hourlyRate: "200.00",
      amount: "100.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te8,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancingRemortgage,
      feeEarnerId: DEMO_IDS.users.paralegal2,
      workDate: yesterday,
      description: "Ordering official copies from Land Registry",
      durationMinutes: 15,
      hourlyRate: "90.00",
      amount: "22.50",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Leasehold purchase
    {
      id: DEMO_IDS.timeEntries.te9,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancingLeasehold,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: today,
      description: "Reviewing lease terms and service charge accounts",
      durationMinutes: 90,
      hourlyRate: "200.00",
      amount: "300.00",
      status: "submitted" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Debt recovery litigation
    {
      id: DEMO_IDS.timeEntries.te10,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigationDebt,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: yesterday,
      description: "Drafting letter before action",
      durationMinutes: 60,
      hourlyRate: "175.00",
      amount: "175.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te11,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigationDebt,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: today,
      description: "Preparing particulars of claim",
      durationMinutes: 150,
      hourlyRate: "175.00",
      amount: "437.50",
      status: "draft" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Contract dispute litigation
    {
      id: DEMO_IDS.timeEntries.te12,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigationContract,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: new Date(now.getTime() - 3 * 86400000).toISOString().split("T")[0],
      description: "Strategy meeting with counsel",
      durationMinutes: 90,
      hourlyRate: "400.00",
      amount: "600.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te13,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigationContract,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: yesterday,
      description: "Reviewing disclosure documents",
      durationMinutes: 240,
      hourlyRate: "350.00",
      amount: "1400.00",
      status: "submitted" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Personal injury - RTA
    {
      id: DEMO_IDS.timeEntries.te14,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryRTA,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: new Date(now.getTime() - 4 * 86400000).toISOString().split("T")[0],
      description: "Instructing medical expert and sending papers",
      durationMinutes: 45,
      hourlyRate: "180.00",
      amount: "135.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te15,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryRTA,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: yesterday,
      description: "Reviewing medical report and advising client",
      durationMinutes: 60,
      hourlyRate: "180.00",
      amount: "180.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te16,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryRTA,
      feeEarnerId: DEMO_IDS.users.paralegal1,
      workDate: today,
      description: "Obtaining police accident report",
      durationMinutes: 30,
      hourlyRate: "100.00",
      amount: "50.00",
      status: "draft" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Personal injury - Workplace
    {
      id: DEMO_IDS.timeEntries.te17,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryWorkplace,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: new Date(now.getTime() - 5 * 86400000).toISOString().split("T")[0],
      description: "Taking detailed witness statement from client",
      durationMinutes: 90,
      hourlyRate: "180.00",
      amount: "270.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te18,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryWorkplace,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: today,
      description: "Reviewing employer's accident book entry",
      durationMinutes: 30,
      hourlyRate: "180.00",
      amount: "90.00",
      status: "draft" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Slip and fall
    {
      id: DEMO_IDS.timeEntries.te19,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjurySlip,
      feeEarnerId: DEMO_IDS.users.paralegal1,
      workDate: yesterday,
      description: "Collating CCTV footage requests",
      durationMinutes: 45,
      hourlyRate: "100.00",
      amount: "75.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // CICA
    {
      id: DEMO_IDS.timeEntries.te20,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.personalInjuryCICA,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: new Date(now.getTime() - 6 * 86400000).toISOString().split("T")[0],
      description: "Completing CICA application form",
      durationMinutes: 120,
      hourlyRate: "175.00",
      amount: "350.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Family - Divorce
    {
      id: DEMO_IDS.timeEntries.te21,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyDivorce,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: new Date(now.getTime() - 7 * 86400000).toISOString().split("T")[0],
      description: "Initial client meeting - taking instructions",
      durationMinutes: 90,
      hourlyRate: "180.00",
      amount: "270.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te22,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyDivorce,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: yesterday,
      description: "Drafting Form E financial disclosure",
      durationMinutes: 180,
      hourlyRate: "180.00",
      amount: "540.00",
      status: "submitted" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te23,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyDivorce,
      feeEarnerId: DEMO_IDS.users.paralegal2,
      workDate: today,
      description: "Obtaining pension CETV valuations",
      durationMinutes: 30,
      hourlyRate: "90.00",
      amount: "45.00",
      status: "draft" as const,
      source: "email_inferred" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Family - Child arrangements
    {
      id: DEMO_IDS.timeEntries.te24,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyChild,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: new Date(now.getTime() - 8 * 86400000).toISOString().split("T")[0],
      description: "Drafting C100 application form",
      durationMinutes: 120,
      hourlyRate: "180.00",
      amount: "360.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te25,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyChild,
      feeEarnerId: DEMO_IDS.users.associate2,
      workDate: yesterday,
      description: "Reviewing CAFCASS safeguarding letter",
      durationMinutes: 45,
      hourlyRate: "180.00",
      amount: "135.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Family - Prenup
    {
      id: DEMO_IDS.timeEntries.te26,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyPrenup,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: new Date(now.getTime() - 9 * 86400000).toISOString().split("T")[0],
      description: "Drafting prenuptial agreement - high net worth",
      durationMinutes: 240,
      hourlyRate: "400.00",
      amount: "1600.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te27,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.familyPrenup,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: today,
      description: "Conference call with client re: amendments",
      durationMinutes: 60,
      hourlyRate: "400.00",
      amount: "400.00",
      status: "draft" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Employment - Unfair dismissal
    {
      id: DEMO_IDS.timeEntries.te28,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentDismissal,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: new Date(now.getTime() - 10 * 86400000).toISOString().split("T")[0],
      description: "Initial consultation - employment history review",
      durationMinutes: 90,
      hourlyRate: "175.00",
      amount: "262.50",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te29,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentDismissal,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: yesterday,
      description: "Drafting ET1 claim form",
      durationMinutes: 180,
      hourlyRate: "175.00",
      amount: "525.00",
      status: "submitted" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te30,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentDismissal,
      feeEarnerId: DEMO_IDS.users.paralegal2,
      workDate: today,
      description: "Collating evidence bundle",
      durationMinutes: 120,
      hourlyRate: "90.00",
      amount: "180.00",
      status: "draft" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Employment - Redundancy
    {
      id: DEMO_IDS.timeEntries.te31,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentRedundancy,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: new Date(now.getTime() - 11 * 86400000).toISOString().split("T")[0],
      description: "Reviewing redundancy selection matrix",
      durationMinutes: 60,
      hourlyRate: "175.00",
      amount: "175.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te32,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentRedundancy,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: today,
      description: "Advising on procedural unfairness",
      durationMinutes: 45,
      hourlyRate: "175.00",
      amount: "131.25",
      status: "draft" as const,
      source: "email_inferred" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Employment - Settlement
    {
      id: DEMO_IDS.timeEntries.te33,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentSettlement,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: new Date(now.getTime() - 12 * 86400000).toISOString().split("T")[0],
      description: "Negotiating settlement terms with employer",
      durationMinutes: 90,
      hourlyRate: "200.00",
      amount: "300.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te34,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.employmentSettlement,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: yesterday,
      description: "Reviewing and amending settlement agreement",
      durationMinutes: 120,
      hourlyRate: "200.00",
      amount: "400.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Probate - Estate administration
    {
      id: DEMO_IDS.timeEntries.te35,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.probateEstate,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: new Date(now.getTime() - 13 * 86400000).toISOString().split("T")[0],
      description: "Valuing estate assets for IHT purposes",
      durationMinutes: 180,
      hourlyRate: "175.00",
      amount: "525.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te36,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.probateEstate,
      feeEarnerId: DEMO_IDS.users.paralegal2,
      workDate: yesterday,
      description: "Corresponding with asset holders",
      durationMinutes: 60,
      hourlyRate: "90.00",
      amount: "90.00",
      status: "approved" as const,
      source: "email_inferred" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Will dispute
    {
      id: DEMO_IDS.timeEntries.te37,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.probateDispute,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: new Date(now.getTime() - 14 * 86400000).toISOString().split("T")[0],
      description: "Advising on Inheritance Act claim prospects",
      durationMinutes: 90,
      hourlyRate: "350.00",
      amount: "525.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te38,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.probateDispute,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: today,
      description: "Drafting letter of claim",
      durationMinutes: 120,
      hourlyRate: "350.00",
      amount: "700.00",
      status: "draft" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Grant of probate
    {
      id: DEMO_IDS.timeEntries.te39,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.probateGrant,
      feeEarnerId: DEMO_IDS.users.paralegal2,
      workDate: yesterday,
      description: "Preparing PA1A intestacy application",
      durationMinutes: 90,
      hourlyRate: "90.00",
      amount: "135.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Criminal - Drink driving
    {
      id: DEMO_IDS.timeEntries.te40,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.criminalDriving,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: new Date(now.getTime() - 15 * 86400000).toISOString().split("T")[0],
      description: "Police station attendance - initial advice",
      durationMinutes: 180,
      hourlyRate: "175.00",
      amount: "525.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te41,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.criminalDriving,
      feeEarnerId: DEMO_IDS.users.associate3,
      workDate: yesterday,
      description: "Reviewing prosecution evidence",
      durationMinutes: 60,
      hourlyRate: "175.00",
      amount: "175.00",
      status: "approved" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Criminal - Fraud
    {
      id: DEMO_IDS.timeEntries.te42,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.criminalFraud,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: new Date(now.getTime() - 16 * 86400000).toISOString().split("T")[0],
      description: "Conference with client at prison",
      durationMinutes: 240,
      hourlyRate: "400.00",
      amount: "1600.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te43,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.criminalFraud,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: today,
      description: "Reviewing unused material disclosure",
      durationMinutes: 180,
      hourlyRate: "400.00",
      amount: "1200.00",
      status: "draft" as const,
      source: "document_activity" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Immigration - Skilled worker
    {
      id: DEMO_IDS.timeEntries.te44,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.immigrationTier2,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: new Date(now.getTime() - 17 * 86400000).toISOString().split("T")[0],
      description: "Completing online visa application",
      durationMinutes: 120,
      hourlyRate: "200.00",
      amount: "400.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te45,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.immigrationTier2,
      feeEarnerId: DEMO_IDS.users.paralegal1,
      workDate: yesterday,
      description: "Preparing supporting documents bundle",
      durationMinutes: 90,
      hourlyRate: "100.00",
      amount: "150.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Immigration - Spouse visa
    {
      id: DEMO_IDS.timeEntries.te46,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.immigrationSpouse,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: today,
      description: "Advising on financial requirement evidence",
      durationMinutes: 45,
      hourlyRate: "200.00",
      amount: "150.00",
      status: "draft" as const,
      source: "email_inferred" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Commercial - Shareholder agreement
    {
      id: DEMO_IDS.timeEntries.te47,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.commercialShareholder,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: new Date(now.getTime() - 18 * 86400000).toISOString().split("T")[0],
      description: "Drafting shareholder agreement",
      durationMinutes: 300,
      hourlyRate: "400.00",
      amount: "2000.00",
      status: "approved" as const,
      source: "manual" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te48,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.commercialShareholder,
      feeEarnerId: DEMO_IDS.users.seniorPartner,
      workDate: yesterday,
      description: "Negotiating investor protection clauses",
      durationMinutes: 120,
      hourlyRate: "400.00",
      amount: "800.00",
      status: "submitted" as const,
      source: "calendar" as const,
      isBillable: true,
      createdAt: now,
      updatedAt: now,
    },
    // Non-billable entries
    {
      id: DEMO_IDS.timeEntries.te49,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.conveyancing,
      feeEarnerId: DEMO_IDS.users.associate,
      workDate: today,
      description: "Training session - new conveyancing software",
      durationMinutes: 60,
      hourlyRate: "200.00",
      amount: "200.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: false,
      createdAt: now,
      updatedAt: now,
    },
    {
      id: DEMO_IDS.timeEntries.te50,
      firmId: DEMO_IDS.firm,
      matterId: DEMO_IDS.matters.litigation,
      feeEarnerId: DEMO_IDS.users.partner,
      workDate: yesterday,
      description: "Pro bono advice clinic",
      durationMinutes: 120,
      hourlyRate: "350.00",
      amount: "700.00",
      status: "approved" as const,
      source: "calendar" as const,
      isBillable: false,
      createdAt: now,
      updatedAt: now,
    },
  ];

  const createdTimeEntries = [];

  for (const teData of timeEntriesData) {
    const [te] = await db
      .insert(timeEntries)
      .values(teData)
      .onConflictDoUpdate({
        target: timeEntries.id,
        set: { updatedAt: now },
      })
      .returning();

    createdTimeEntries.push({
      id: te.id,
      description: te.description,
      amount: te.amount,
    });
    console.log(`    Created time entry: ${te.description.substring(0, 40)}...`);
  }

  return createdTimeEntries;
}
